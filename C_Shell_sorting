#include <stdio.h>
#include <stdlib.h>

int main(){
    system("chcp 1251");
    srand(time(NULL));

    int ind,max,boof,a, mid;
    int h = 1;

    printf("Кол-во чисел: ");
    scanf("%d",&a);

    int A[a];
    mid = a/2;

    printf("\n\nДо сортировки: ");

    //Заполнение рандомное
    for (int i = 0; i < a; i++){
        A[i] = rand()%10 + 1;
        printf("%d ",A[i]);
    }

    //////////////////////////

    h = 1;

    while (h < a/2){
        h = 2*h + 1;
    }

    while (h >= 1){
        for (int q = 1; q < h; q++ ){

            ////Simple - include with step h
            for (int s = h; s < a; s += h){
                ind = s - h;
                boof = A[s];
                while((A[ind] > boof) && (ind >= h)){
                    A[ind + h] = A[ind];
                    ind -= h;
                }
                A[ind+h] = boof;
            }
            /////
        }
        h = (h-1)/3;
    }

    printf("\n\nПосле сортировки: ");
    for (int i = 0; i < a; i++){
        printf("%d ",A[i]);
    }
}
